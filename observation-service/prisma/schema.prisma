model Observation {
  id            String            @id @default(uuid())
  speciesId     String
  authorId      String
  description   String
  status        ObservationStatus @default(PENDING)
  validatedBy   String?
  validatedAt   DateTime?
  deletedBy     String?           // ⚠️ AJOUT REQUIS
  deletedAt     DateTime?         // ⚠️ AJOUT REQUIS
  deletedReason String?           // ⚠️ AJOUT REQUIS
  createdAt     DateTime          @default(now())

  species Species              @relation(fields: [speciesId], references: [id], onDelete: Cascade)
  history ObservationHistory[] // ⚠️ AJOUT REQUIS (relation)

  @@map("observations")
}

enum ObservationStatus {
  PENDING
  VALIDATED
  REJECTED
  DELETED  // ⚠️ AJOUT REQUIS
}

// ⚠️ MODÈLE COMPLÈTEMENT MANQUANT
model ObservationHistory {
  id              String    @id @default(uuid())
  observationId   String
  action          String    // CREATED, VALIDATED, REJECTED, DELETED, RESTORED
  performedBy     String    // userId
  performedByRole String    // USER, EXPERT, ADMIN
  previousStatus  String?   // statut avant l'action
  newStatus       String    // statut après l'action
  comment         String?   // raison/commentaire
  timestamp       DateTime  @default(now())

  observation Observation @relation(fields: [observationId], references: [id], onDelete: Cascade)

  @@map("observation_history")
}